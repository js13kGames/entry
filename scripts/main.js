!function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){var i=e[o][1][t];return s(i||t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t.x>e.x?1:e.x>t.x?-1:0}function o(t,e){return t.y>e.y?1:e.y>t.y?-1:0}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=t("../util/sprite"),c=n(u),l=t("../util/spritesheet"),h=n(l),f=t("../util/keys"),d=t("../util/pool"),p=n(d),g=t("./colors"),v=t("../util/center"),m=n(v),y=t("../util/monetization"),w=n(y),b=function(){function t(e,i,n,r){s(this,t),this.canvas=e,this.context=i,this.audio=n,this.events=r,this.fireDelay=1e3,this.cooldown=2e3,this.switchingInterval=3e3,this.rows=4,this.columns=8,this.width=40,this.height=30,this.spacing=30,this.descent=.05,this.maxSpeed=8,this.missileSpeed=(0,w.default)()?5:3,this.missileHeight=(0,w.default)()?25:15,this.speed=1,this.firingFrom="",this.weaponsReady=!0,this.switchingTimer=null,this.sprites=[],this.missiles=new p.default({create:c.default}),this.sparks=new p.default({create:c.default}),this.populateGrid(),this.handleSwitching()}return a(t,[{key:"populateGrid",value:function(){for(var t=(this.canvas.width-this.columns*this.width-(this.columns-1)*this.spacing)/2,e=[new h.default("./images/alien1.png",4),new h.default("./images/alien2.png",4),new h.default("./images/alien1.png",4),new h.default("./images/alien3.png",4)],i=0;i<this.rows;i++)for(var n=0;n<this.columns;n++)this.sprites.push(new c.default({context:this.context,x:(this.width+this.spacing)*n+t+this.width/2,y:(this.width+this.spacing)*i+50,width:this.width,height:this.height,anchor:m.default,spritesheet:e[i],alive:!0,aboutToFire:!1}))}},{key:"handleSwitching",value:function(){var t=this;this.switchingTimer=setInterval(function(){"odd"===t.firingFrom?t.firingFrom="even":t.firingFrom="odd"},this.switchingInterval)}},{key:"update",value:function(){this.checkStillAlive(),this.workOutSpeed(),this.fireMissiles(),this.checkForHittingBottom(),this.handleInput(),this.moveDownwards(),this.getAlive().forEach(function(t){return t.update()}),this.missiles.update(),this.sparks.update()}},{key:"checkStillAlive",value:function(){this.getAlive().length<=0&&this.events.emit("ALL_ALIENS_DEAD")}},{key:"workOutSpeed",value:function(){this.speed=this.maxSpeed+1-this.getAlive().length/this.sprites.length*this.maxSpeed}},{key:"fireMissiles",value:function(){var t=this;this.getColumns(this.getAlive().length>1?this.firingFrom:"all").forEach(function(e){t.weaponsReady&&!e.aboutToFire&&(e.aboutToFire=!0,setTimeout(function(){t.missiles.get({context:t.context,x:e.x,y:e.y+e.height/2,color:g.colorGreen,width:5,height:t.missileHeight,anchor:m.default,dy:t.missileSpeed,ttl:t.canvas.height}),t.audio.play("pew"),t.weaponsReady=!1,setTimeout(function(){e.aboutToFire=!1},500),setTimeout(function(){t.weaponsReady=!0},t.cooldown)},t.fireDelay))})}},{key:"checkForHittingBottom",value:function(){var t=this;this.getColumns(this.firingFrom).forEach(function(e){e.y+e.height/2>t.canvas.height&&t.events.emit("ALIENS_REACHED_BOTTOM")})}},{key:"handleInput",value:function(){var t=this;(0,f.leftPressed)()?this.getLeftMost().x>this.canvas.gutter+this.width/2&&this.sprites.forEach(function(e){e.x-=t.speed}):(0,f.rightPressed)()&&this.getRightMost().x<this.canvas.width-this.canvas.gutter-this.width/2&&this.sprites.forEach(function(e){e.x+=t.speed})}},{key:"moveDownwards",value:function(){var t=this;this.sprites.forEach(function(e){e.y+=t.descent})}},{key:"render",value:function(){this.sparks.render(),this.missiles.render(),this.getAlive().forEach(function(t){t.render()})}},{key:"getLeftMost",value:function(){return this.getAlive().sort(r)[0]}},{key:"getRightMost",value:function(){return this.getAlive().sort(r).slice(-1)[0]}},{key:"getLowest",value:function(){var t=this.getAlive().sort(o).slice(-1)[0];return this.getAlive().filter(function(e){return e.y===t.y})}},{key:"getColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={},i=[];this.getAlive().forEach(function(t){e["c"+t.x]||(e["c"+t.x]=[]),e["c"+t.x].push(t)});for(var n in e)i.push(e[n].sort(o).slice(-1)[0]);return i=i.sort(r),"odd"===t?i.filter(function(t,e){return e%2==0}):"even"===t?i.filter(function(t,e){return e%2!=0}):"all"===t?i:[]}},{key:"getAlive",value:function(){return this.sprites.filter(function(t){return!0===t.alive})}},{key:"getDead",value:function(){return this.sprites.filter(function(t){return!1===t.alive})}}]),t}();i.default=b},{"../util/center":9,"../util/keys":12,"../util/monetization":13,"../util/pool":15,"../util/sprite":17,"../util/spritesheet":18,"./colors":2}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.colorBlack="#000000",i.colorWhite="#FFFFFF",i.colorYellow="#FFFF00",i.colorGreen="#00FF00",i.colorRed="#FF0000",i.colorCyan="#00AEFF",i.colorOrange="#FF9900",i.colorPurple="#FF00FF"},{}],3:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i,n){var s=t-i,r=e-n;return Math.sqrt(s*s+r*r)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../util/sprite"),u=n(a),c=t("../util/spritesheet"),l=n(c),h=t("../util/random"),f=t("../util/pool"),d=n(f),p=t("./colors"),g=t("../util/center"),v=n(g),m=function(){function t(e,i,n,r,o){s(this,t),this.canvas=e,this.context=i,this.audio=n,this.events=r,this.aliens=o,this.cooldown=1800,this.speed=1,this.firingRange=70,this.dodgeRange=50,this.rechargeTime=2e3,this.invincibilityTime=4e3,this.weaponReady=!0,this.lives=5,this.target=null,this.recharging=!1,this.invincible=!1,this.sprite=new u.default({context:this.context,x:this.canvas.width/2-10,y:this.canvas.height-40,width:40,height:27,anchor:v.default,spritesheet:new l.default("./images/player.png",4),dx:2}),this.missiles=new d.default({create:u.default}),this.sparks=new d.default({create:u.default}),this.updateDisplay(),this.chooseTarget()}return o(t,[{key:"update",value:function(){this.recharging?this.sprite.dx=0:(this.workOutSpeed(),this.moveTowardsTarget(),this.fireMissiles(),this.playerMissileDodging(),this.changeTarget(),this.hitEdges()),this.invincible||(this.alienMissileCollissions(),this.alienPlayerCollissions()),this.playerMissileCollissions(),this.sprite.update(),this.missiles.update(),this.sparks.update()}},{key:"workOutSpeed",value:function(){this.speed=.8*this.aliens.speed}},{key:"moveTowardsTarget",value:function(){this.sprite.x<this.target.x-10?this.sprite.dx=this.speed:this.sprite.x>this.target.x+10?this.sprite.dx=-1*this.speed:this.sprite.dx=0}},{key:"fireMissiles",value:function(){var t=this;(this.sprite.x>this.target.x-this.firingRange&&this.sprite.x<this.target.x*this.firingRange||(0,h.chance)(100))&&!0===this.weaponReady&&(this.missiles.get({context:this.context,x:this.sprite.x,y:this.sprite.y-this.sprite.height/2,color:p.colorYellow,width:5,height:15,anchor:v.default,dy:-3,ttl:this.canvas.height}),this.audio.play("shot"),this.weaponReady=!1,setTimeout(function(){t.weaponReady=!0},this.cooldown))}},{key:"playerMissileCollissions",value:function(){var t=this;this.missiles.getAliveObjects().forEach(function(e){t.aliens.getAlive().forEach(function(i){e.collidesWith(i)&&(e.ttl=0,t.events.emit("ALIEN_KILLED",i))})})}},{key:"alienMissileCollissions",value:function(){var t=this;this.aliens.missiles.getAliveObjects().forEach(function(e){e.collidesWith(t.sprite)&&(e.ttl=0,t.events.emit("PLAYER_LOSE_LIFE"))})}},{key:"playerMissileDodging",value:function(){var t=this;this.aliens.missiles.getAliveObjects().forEach(function(e){if(e.y>t.sprite.y-t.dodgeRange&&e.y<t.canvas.height){var i=r(e.x,e.y+e.dy,t.sprite.x+t.sprite.dx,t.sprite.y);e.x>t.sprite.x-20&&e.x<t.sprite.x?t.sprite.dx=2:e.x<t.sprite.x+20&&e.x>=t.sprite.x?t.sprite.dx=-2:i<30?t.sprite.x<e.x?t.sprite.dx=-2:t.sprite.dx=2:0!==t.sprite.dx&&i<50&&(t.sprite.dx=0)}})}},{key:"alienPlayerCollissions",value:function(){var t=this;this.aliens.getAlive().forEach(function(e){e.collidesWith(t.sprite)&&(e.alive=!1,t.events.emit("PLAYER_LOSE_LIFE"))})}},{key:"changeTarget",value:function(){this.target.alive&&!(0,h.chance)(800)||this.chooseTarget()}},{key:"hitEdges",value:function(){this.sprite.x>this.canvas.width-this.canvas.gutter-this.sprite.width/2&&(this.sprite.dx*=-1,this.sprite.x=this.canvas.width-this.canvas.gutter-this.sprite.width/2),this.sprite.x<this.canvas.gutter+this.sprite.width/2&&(this.sprite.dx*=-1,this.sprite.x=this.canvas.gutter+this.sprite.width/2)}},{key:"render",value:function(){this.sparks.render(),this.missiles.render();var t=new Date;(!this.invincible||t.getMilliseconds()/100<5)&&this.sprite.render()}},{key:"updateDisplay",value:function(){document.getElementById("playerLives").innerHTML="Lives:"+this.lives}},{key:"chooseTarget",value:function(){var t=this;(0,h.chance)(2)?this.target=(0,h.randomFromArray)(this.aliens.getLowest()):this.target=this.aliens.getLowest().sort(function(e,i){var n=Math.abs(e.x-t.sprite.x),s=Math.abs(i.x-t.sprite.x);return n>s?1:s>n?-1:0})[0]}},{key:"respawn",value:function(){var t=this;this.sprite.x=this.canvas.width/2,this.sprite.dx=0,this.chooseTarget(),this.recharging=!0,this.invincible=!0,setTimeout(function(){t.recharging=!1},this.rechargeTime),setTimeout(function(){t.invincible=!1},this.invincibilityTime)}}]),t}();i.default=m},{"../util/center":9,"../util/pool":15,"../util/random":16,"../util/sprite":17,"../util/spritesheet":18,"./colors":2}],4:[function(t,e,i){"use strict";setInterval(function(){var t=document.getElementById("ghostCanvas"),e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.drawImage(document.getElementById("mainCanvas"),0,0)},500)},{}],5:[function(t,e,i){"use strict";(function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t})()&&document.body.classList.add("mobile")},{}],6:[function(t,e,i){"use strict";function n(){var t=document.getElementById("screen"),e=t.offsetWidth,i=t.offsetHeight,n=.9*window.innerWidth,s=.9*window.innerHeight,r=n/e,o=s/i;t.style.transform="scale("+(r>o?o:r)+")"}n(),window.addEventListener("resize",n,!1)},{}],7:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(){B.go("game"),C=new h.default(I,j,q,R),P=new d.default(I,j,q,R,C),D=new Date,S&&S.stop&&S.stop(),S=new k.default({update:function(){P.update(),C.update()},render:function(){j.clearRect(0,0,I.width,I.height),P.render(),C.render()}}),S.start()}function r(){switch(B.current){case"intro":case"results":s()}}function o(){var t=new Date,e=(t-D)/1e3,i=5e3-e;return i+=2e3*C.getAlive().length,i=Math.round(i),i<0&&(i=0),i}function a(t){var e=parseInt(T.get("highscore"));return e||(e=0),t>=e&&(e=t,T.set("highscore",e)),e}function u(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function c(t,e,i){for(var n=0;n<(0,x.random)(20,40);n++){t.sparks.get({context:j,x:e.x+e.width/2,y:e.y+e.height/2,color:i,width:5,height:5,anchor:A.default,dx:(0,x.random)(-300,300)/100,dy:(0,x.random)(-300,300)/100,ttl:(0,x.random)(20,z)})}}var l=t("./game/aliens"),h=n(l),f=t("./game/player"),d=n(f),p=t("./util/audio"),g=n(p),v=t("./util/events"),m=n(v),y=t("./util/navigation"),w=n(y),b=t("./util/gameLoop"),k=n(b),x=t("./util/random"),E=t("./game/colors"),_=t("./util/center"),A=n(_);t("./interface/ghosting"),t("./interface/mobileCheck"),t("./interface/scaling");var M=t("./util/monetization"),O=n(M),F=t("./util/storage"),L=n(F),T=new L.default,I=document.getElementById("mainCanvas"),j=I.getContext("2d");I.gutter=10;var C=void 0,P=void 0,S=void 0,D=void 0,q=new g.default,R=new m.default,B=new w.default,z=(0,O.default)()?160:80;R.on("ALIENS_REACHED_BOTTOM",function(){R.emit("ALIENS_WIN")}),R.on("ALL_ALIENS_DEAD",function(){R.emit("GAME_END","failure")}),R.on("ALIEN_KILLED",function(t){t.alive=!1,q.play("blow"),c(C,t,E.colorYellow)}),R.on("PLAYER_LOSE_LIFE",function(){P.lives-=1,P.updateDisplay(),q.play("explosion"),c(P,P.sprite,E.colorGreen),P.lives<=0?R.emit("ALIENS_WIN"):P.respawn()}),R.on("ALIENS_WIN",function(){R.emit("GAME_END","success")}),R.on("GAME_END",function(t){S.stop(),B.go("results"),document.getElementById("results").setAttribute("class",t);var e=o(),i=a(e);document.getElementById("score").innerHTML=u(e),document.getElementById("highscore").innerHTML=u(i)}),document.addEventListener("keydown",function(t){13!==t.keyCode&&32!==t.keyCode||r()}),document.addEventListener("click",r),B.go("intro")},{"./game/aliens":1,"./game/colors":2,"./game/player":3,"./interface/ghosting":4,"./interface/mobileCheck":5,"./interface/scaling":6,"./util/audio":8,"./util/center":9,"./util/events":10,"./util/gameLoop":11,"./util/monetization":13,"./util/navigation":14,"./util/random":16,"./util/storage":19}],8:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("../vendor/soundfx"),a=n(o),u=t("./storage"),c=n(u),l=new c.default,h=function(){function t(){var e=this;s(this,t),"true"===l.get("audio")?this.enabled=!0:this.enabled=!1,this.toggle=document.getElementById("audioToggle"),this.toggle.addEventListener("click",function(){e.enabled=!e.enabled,e.updateDisplay()}),this.updateDisplay()}return r(t,[{key:"updateDisplay",value:function(){l.set("audio",""+this.enabled),this.enabled?this.toggle.classList.add("active"):this.toggle.classList.remove("active")}},{key:"play",value:function(t){this.enabled&&a.default[t]&&a.default[t]()}}]),t}();i.default=h},{"../vendor/soundfx":20,"./storage":19}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={x:.5,y:.5}},{}],10:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){return n(this,t),this.queue={},this}return s(t,[{key:"emit",value:function(t,e){this.queue[t]&&this.queue[t].forEach(function(t){t(e)})}},{key:"on",value:function(t,e){return this.queue[t]||(this.queue[t]=[]),this.queue[t].push(e),this}},{key:"off",value:function(t,e){if(this.queue[t]){var i=this.queue[t].indexOf(e);i&&this.queue[t].splice(i,1)}return this}}]),t}();i.default=r},{}],11:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){n(this,t),this.options=e,this.running=!1,this.raf=null,this.delta=1e3/60,this.accumulator=0,this.last=performance.now()}return s(t,[{key:"start",value:function(){this.running||(this.running=!0,this.raf=requestAnimationFrame(this.tick.bind(this)))}},{key:"stop",value:function(){this.running=!1,cancelAnimationFrame(this.raf)}},{key:"tick",value:function(){var t=performance.now(),e=t-this.last;for(this.last=t,this.accumulator+=e;this.accumulator>=this.delta;)this.options.render&&this.options.render(),this.accumulator-=this.delta;this.options.update&&this.options.update(),this.running&&(this.raf=requestAnimationFrame(this.tick.bind(this)))}}]),t}();i.default=r},{}],12:[function(t,e,i){"use strict";function n(){return o.left}function s(){return o.right}function r(t,e,i){e.forEach(function(e){t.addEventListener(e,i)})}Object.defineProperty(i,"__esModule",{value:!0});var o={left:!1,right:!1};document.addEventListener("keydown",function(t){37===t.keyCode&&(o.left=!0),39===t.keyCode&&(o.right=!0)}),document.addEventListener("keyup",function(t){37===t.keyCode&&(o.left=!1),39===t.keyCode&&(o.right=!1)});var a=document.getElementById("leftButton"),u=document.getElementById("rightButton");r(a,["mousedown","touchstart"],function(){o.left=!0}),r(a,["mouseup","touchend","touchcancel"],function(){o.left=!1}),r(u,["mousedown","touchstart"],function(){o.right=!0}),r(u,["mouseup","touchend","touchcancel"],function(){o.right=!1}),i.leftPressed=n,i.rightPressed=s},{}],13:[function(t,e,i){"use strict";function n(){return document.monetization&&"started"===document.monetization.state}Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],14:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t),this.current=e}return s(t,[{key:"go",value:function(t){this.current=t,document.getElementById("screen").setAttribute("class",this.current)}}]),t}();i.default=r},{}],15:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./sprite"),o=function(t){return t&&t.__esModule?t:{default:t}}(r),a=function(){function t(){n(this,t),this.clear()}return s(t,[{key:"get",value:function(t){var e=this.getDeadObjects();e.length>0?e[0].init(t):this.objects.push(new o.default(t))}},{key:"getDeadObjects",value:function(){return this.objects.filter(function(t){return t.ttl<=0})}},{key:"getAliveObjects",value:function(){return this.objects.filter(function(t){return t.ttl>0})}},{key:"clear",value:function(){this.objects=[]}},{key:"update",value:function(){this.getAliveObjects().forEach(function(t){t.update()})}},{key:"render",value:function(){this.getAliveObjects().forEach(function(t){t.render()})}}]),t}();i.default=a},{"./sprite":17}],16:[function(t,e,i){"use strict";function n(t){return 0===r(t)}function s(t){return t[r(t.length)]}function r(t,e,i){var n=0,s=0,r=1,o=void 0;return void 0!==t&&(n=0,s=t),void 0!==e&&(n=t,s=e),void 0!==i&&(r=i),o=Math.floor(Math.random()*(s-n))+n,r>1&&(o=Math.round(o/r)*r),o}Object.defineProperty(i,"__esModule",{value:!0}),i.chance=n,i.randomFromArray=s,i.random=r},{}],17:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("./random"),o=function(){function t(e){n(this,t),this.init(e)}return s(t,[{key:"init",value:function(t){this.ttl=1/0,this.dx=0,this.dy=0;for(var e in t)this[e]=t[e]}},{key:"isAlive",value:function(){return this.ttl>0}},{key:"collidesWith",value:function(t){if(this.rotation||t.rotation)return null;var e=this.x-this.width*this.anchor.x,i=this.y-this.height*this.anchor.y,n=t.x,s=t.y;return t.anchor&&(n-=t.width*t.anchor.x,s-=t.height*t.anchor.y),e<n+t.width&&e+this.width>n&&i<s+t.height&&i+this.height>s}},{key:"update",value:function(){this.x+=this.dx,this.y+=this.dy,this.ttl--}},{key:"render",value:function(){var t=-this.width*this.anchor.x,e=-this.height*this.anchor.y;this.aboutToFire&&(t+=(0,r.random)(-3,3),e+=(0,r.random)(-3,3)),this.image?this.context.drawImage(this.image,0,0,this.image.width,this.image.height,this.x+t,this.y+e,this.width,this.height):this.spritesheet?this.spritesheet.render({x:this.x+t,y:this.y+e,width:this.width,height:this.height,context:this.context}):(this.context.fillStyle=this.color,this.context.fillRect(this.x+t,this.y+e,this.width,this.height)),this.context.restore()}}]),t}();i.default=o},{"./random":16}],18:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,i){var s=this;n(this,t),this.currentFrame=0,this.frames=i,this.animationSpeed=100,this.counter=0;var r=new Image;r.onload=function(){s.image=r,s.width=r.width/s.frames,s.height=r.height},r.src=e}return s(t,[{key:"render",value:function(t){this.image&&t.context.drawImage(this.image,this.currentFrame*this.width,0,this.width,this.height,t.x,t.y,t.width,t.height),++this.counter>this.animationSpeed&&(this.counter=0,++this.currentFrame>=this.frames&&(this.currentFrame=0))}}]),t}();i.default=r},{}],19:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t)}return s(t,[{key:"set",value:function(t,e){window.localStorage&&window.localStorage.setItem(t,e)}},{key:"get",value:function(t){if(window.localStorage)return window.localStorage.getItem(t)}}]),t}();i.default=r},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t){for(var e="number"==typeof t?t:50,i=new Float32Array(44100),n=Math.PI/180,s=0,r=void 0;s<44100;++s)r=2*s/44100-1,i[s]=(3+e)*r*20*n/(Math.PI+e*Math.abs(r));return i}function e(e,r,o,a,u,c){function l(){f.frequency.value=e+r*g,d.gain.value=(1-g/a)*u*s,++g>a&&(clearInterval(v),setTimeout(h,o+a))}function h(){f.stop()}var f=i.createOscillator();f.frequency.value=e,f.type=n[c||0];var d=i.createGain();d.gain.value=0;var p=i.createWaveShaper();p.curve=t(800),p.oversample="8x",f.connect(p),p.connect(d),d.connect(i.destination),f.start();var g=0,v=setInterval(l,o)}var i=new(window.AudioContext||window.webkitAudioContext),n=["square","sawtooth","triangle","sine"],s=1;return{playSound:e,getVolume:function(){return _volume},setVolume:function(t){s=t},jump:function(){e(150,30,15,20,.5)},pew:function(){e(920,-80,20,15,.5)},zap:function(){e(500,-200,40,10,.25,1)},bounce:function(){e(260,-60,15,15,.5,2)},stuck:function(){e(100,-10,15,15,1,2)},explosion:function(){e(100,-10,10,25,.5),e(125,-5,20,45,.1,1),e(40,2,20,20,1,2),e(200,-4,10,100,.25,2)},blow:function(){e(120,-6,20,15,.1,1),e(40,-2,20,25,1,2),e(60,10,15,15,.1,1),e(160,-5,20,30,.1,3)},shot:function(){e(160,10,15,10,.1),e(250,-20,30,10,.1,1),e(1500,-150,30,10,.1,1)},coin:function(){e(510,0,15,20,.1),setTimeout(function(){e(2600,1,10,50,.2)},80)}}}();i.default=n},{}]},{},[7]);