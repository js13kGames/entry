<style>body {display: block; margin:0;background:black;}</style>
<body>
<canvas width="128" height="128" style="display:block;height:100%;margin: auto auto;image-rendering:pixelated;image-rendering:crisp-edges;"></canvas>
<script>'use strict';let b=Math.floor,aa=Math.abs,ba=Math.round,g=Math.random,ca=new AudioContext,da=ca.createOscillator(),ea=ca.createGain();da.type="square";da.connect(ea);ea.gain.value=0;da.start();ea.connect(ca.destination);let p=null;addEventListener("gamepadconnected",c=>{p=navigator.getGamepads()[c.J.index]});addEventListener("gamepaddisconnected",()=>{p=null});
let r=c=>{let d=c[0];da.frequency.setValueAtTime(d[0],ca.currentTime);ea.gain.value=.04;setTimeout(()=>{ea.gain.value=0;da.frequency.value=0;1<c.length&&r(c.slice(1))},d[1]+5)},t=[[110,35],[220,25],[180,15],[440,25],[220,25],[110,25],[55,50],[0,50],[55,75]],v=[[440,15],[220,15],[110,15]],fa=[[0,10],[440,10],[680,10]],ha=[[523,30],[466,30],[311,30],[261,30],[523,30],[1047,30]],ia=[],ja=document.querySelector("canvas"),w=ja.getContext("2d"),ka=document.createElement("canvas"),la=ka.getContext("2d");
new ImageData(128,128);let ma=new Image;new Image;
let y=new Image,z=0,qa=0,A=new Uint8Array(256),ra=[[22,33,26],[127,6,34],[214,36,17],[255,132,38],[255,209,0],[250,253,255],[255,128,164],[255,38,116],[148,33,106],[67,0,103],[35,73,117],[104,174,212],[191,255,60],[16,210,117],[0,120,153],[0,0,0]],sa=[0,0,128,128],C=0,E=0,ta=[[55,56,71,72,87,88,103,104],[57,58,73,74,89,90,105,106],[91,92,93,94,107,108,109,110],[119,120,121,122,135,136,137,138],[123,124,125,126,139,140,141,142]],F=(c,d=8,f=8)=>({frames:c,H:c.length,width:d,height:f}),ua=F([214],16),
va=F([15],8,12),G=[F([251]),F([255])],wa=F([165]),xa=F([198]),I=[],ya=F([112]),za=F([114]),Aa=F([115,116,133,116]),Ba=F([75],24),Ca=F([169]),Da=F([160,161]),Ea=0,Fa=F([14],8,16),Ga=F([118]),Ha=F([117]),Ia=F([21]),Ja=F([22,40]),Ka=[F([5]),F([24]),F([6]),F([25]),F([23])],La=F([224],40),Ma=F([240],32),Na=[F([200]),F([201]),F([216]),F([217])],Oa=F([131],16),Pa=F([205],24,12),Qa=F([202],24,12),Ra=F([172],8,16),Sa=F([173],12,16),Ta=F([183]),Ua=F([168]),Va=F([147],16,16),Wa=[F([162]),F([146]),F([130])],
Xa=F([192],16,16),Ya=F([179,180]),Za=F([196,197]),$a=F([181,182]),ab=[F([0]),F([16]),F([1])],J=~~sessionStorage.getItem("px"),K=~~sessionStorage.getItem("py"),bb=!0,cb=[15,12,13,2,11,7,1,14,8,6],gb=0,hb=[],ib=F([32,33,34]),jb=[F([46]),F([47])],kb=F([7,8,9]),lb=F([35,36,37,38,39]),mb=F([17]),L=[],nb=0,ob=1;var pb=[0,0,0,0],qb=[0,0],rb=[0,0,0,0];
let sb=F([2]),tb=F([18,19]),ub=F([20]),vb=F([3,4]),wb=F([9,8,7]),xb=~~sessionStorage.getItem("pwep")||0,M=[~~sessionStorage.getItem("boss0"),~~sessionStorage.getItem("boss1"),~~sessionStorage.getItem("boss2"),~~sessionStorage.getItem("boss3"),~~sessionStorage.getItem("boss4")],yb=[[[220,10]],[[550,15],[440,30],[350,20]],[[220,10],[320,10]],[[440,5],[330,5],[220,5],[110,10]],[[880,5],[440,5],[220,5],[110,5],[55,5]]],zb=[[-1,0],[-.7,-.7],[0,-1],[.7,-.7],[1,0],[.7,.7],[0,1],[-.7,.7]],Cb=[(c,d,f)=>L.push({f:sb,
x:c,y:d,m:f,effect:null,l:1}),(c,d,f)=>L.push({f:tb,x:c,y:d,m:f,effect:null,l:2}),(c,d,f)=>L.push({f:ub,x:c,y:d,m:f,effect:Ab,l:3}),(c,d,f)=>L.push({f:vb,x:c,y:d,m:f,effect:Bb,l:4}),(c,d,f)=>L.push({f:wb,x:c,y:d,m:f,effect:Ab,l:5})],Db=0,Eb=(c,d)=>0==Db++%2&&hb.push({f:ib,x:c,y:d,w:8,m:0,A:0}),Fb=(c,d)=>0==Db++%4&&hb.push({f:jb[z%2?0:1],x:c,y:d,w:30,m:0,A:-.15}),Ab=(c,d)=>hb.push({f:kb,x:c,y:d,w:12,m:0,A:0}),Bb=(c,d)=>hb.push({f:lb,x:c,y:d,w:12,m:0,A:0}),Gb=(c,d)=>{zb.forEach(f=>hb.push({f:mb,x:c,
y:d,w:50,m:f[0],A:f[1]}))},Jb=(c,d)=>{zb.forEach(f=>hb.push({f:kb,x:c,y:d,w:200,m:f[0],A:f[1]}))},O=(c,d)=>{[[c,d],[c+16,d],[c+8,d+8],[c,d+16],[c+16,d+16]].forEach(f=>Bb(...f))},Kb=F([28]),Lb=F([26]),Mb=[],Nb=[[(c,d)=>[c,d,!1,P[3],270,1,0],(c,d)=>[c,d,!1,P[4],180,0,1],(c,d)=>[c,d,!1,P[5],0,0,0]],[(c,d)=>[c,d,!1,P[0],180,0,1],(c,d)=>[c,d,!1,P[1],180,0,1],(c,d)=>[c,d,!1,P[2],180,0,1],(c,d)=>[c,d,!1,P[4],180,0,1]],[(c,d)=>[c,d,!1,P[0],90,-1,0],(c,d)=>[c,d,!1,P[2],90,-1,0],(c,d)=>[c,d,!1,P[3],90,-1,0]],
[(c,d)=>[c,d,!1,P[0],0,0,-1],(c,d)=>[c,d,!1,P[1],0,0,-1],(c,d)=>[c,d,!1,P[2],0,0,-1],(c,d)=>[c,d,!1,P[4],0,0,-1]],[(c,d)=>[c,d,!1,P[0],270,1,0],(c,d)=>[c,d,!1,P[2],270,0,-1],(c,d)=>[c,d,!1,P[3],270,1,-1]]],Ob=[],Pb=[],Qb=[],Rb=[],R=null,Sb=0,Tb=F([96]),Ub=F([144]),Vb=F([48,64]),Wb=F([81]),Xb=F([100]),Yb=F([86]),Zb=F([85]),$b=F([101]),P=[(c,d,f=0,h=0,e=0)=>Pb.push({f:Tb,x:c,y:d,dir:f,g:h,h:e,a:3,type:0}),(c,d,f=0,h=0,e=0)=>Pb.push({f:Ub,x:c,y:d,dir:f,g:h,h:e,a:4,type:1}),(c,d,f=0,h=0,e=0)=>Pb.push({f:Yb,
x:c,y:d,dir:f,g:h,h:e,a:4,type:2}),(c,d,f=0,h=0,e=0)=>Pb.push({f:512>d?Wb:Xb,x:c,y:d,dir:f,g:h,h:e,a:5,type:3}),(c,d,f=0,h=0,e=0)=>Pb.push({f:512>d?Wb:Xb,x:c,y:d,dir:f,g:h,h:e,a:5,type:4}),(c,d,f=0,h=0,e=0)=>Pb.push({f:512>d?Zb:$b,x:c,y:d,dir:f,g:h,h:e,a:2,type:5})],S=(c,d,f,h,e,B=Vb)=>{r([[110,20]]);Qb.push({I:B,x:c,y:d,type:f,g:h,h:e,l:1})},ac=[],bc=F([78],16),cc=F([10],16),dc=[F([60]),F([61]),F([62]),F([63])],ec=F([170],16,16),fc=F([185]),gc=F([149],48),hc=F([230],72),ic=!1,jc=0,T=6,kc=12,lc=0,
mc=!1,U=0,V=0,W=0,X=0,nc=50,oc=0,pc=0,qc=0,rc=c=>{let d=[],f=0;for(let h=0;h<c;h++,f++)d[f]=f;return d},sc=(c,d,f)=>{let h=0;for(let e of ra){if(e[0]===c&&e[1]===d&&e[2]===f)return h;h++}return 15},Y=(c,d,f,h=0,e=!1,B=0)=>{let m=c.frames[z%c.H];[d,f]=[b(d),b(f)];let [n,D]=[m%16,b(m/16)];B--&&z%-3||(w.save(),w.translate(d+c.width/2,f+c.height/2),d=2*Math.PI-Math.PI/180*h,e&&w.scale(-1,1),w.rotate(d),w.drawImage(ma,8*n,8*D,c.width,c.height,-c.width/2,-c.height/2,c.width,c.height),w.restore())},tc=(c,
d,f)=>{c=c[(d+f)%c.length];c=[c%16,b(c/16)];let [h,e]=c;w.drawImage(ma,8*h,8*e,8,8,8*d,8*f,8,8)},uc=(c,d)=>{c=128*d+c;d=0;128<c&&5===y[c-128]&&(d=1)||5===y[c-1]&&(d=4);16256>c&&5===y[c+128]&&(d=3)||5===y[c+1]&&(d=2);return d},vc=(c,d)=>{var f=V/(1.5*R.j);f*=f;return(1-f)*c+f*d},wc=()=>{var c;ka.width=ka.height=128;for(c in pb)pb[c]=~~sessionStorage.getItem(`hp${c}`)||0;for(c in qb)qb[c]=~~sessionStorage.getItem(`suit${c}`)||0;for(c in rb)rb[c]=~~sessionStorage.getItem(`wep${c}`)||0;for(c=0;4>c;c++)ia.push([131,
150],[262,150],[277,150],[139,150]);ia.push([131,50],[66,20],[33,10],[16,5]);for(let d in y){let [f,h]=[d%128,b(d/128)];c=y[128*h+f];13===c&&([J,K]=[8*f,8*h],[C,E]=[b(f/16),b(h/16)]);if(2===c){let e=uc(f,h);Ob.push(Nb[e][b(Math.random()*Nb[e].length)](8*f,8*h))}7===c&&ac.push({x:8*f,y:8*h});1===c&&Rb.push({x:8*f,y:8*h,type:f%4})}sessionStorage.getItem("px")?(J=~~sessionStorage.getItem("px"),K=~~sessionStorage.getItem("py")):(sessionStorage.setItem("px",J),sessionStorage.setItem("py",K));T=kc=6+pb.reduce((d,
f)=>d+2*f);nb=qb.reduce((d,f)=>d+f);xb=rb.reduce((d,f)=>d+f);ob-=.25*nb},Z=(c,d,f,h,e,B,m,n)=>!(c+f<e||c>e+m||d+h<B||d>B+n),xc=(c,d,f=c,h=d)=>{c=b(c/8);d=b(d/8);f=b(f/8);h=b(h/8);h=y[128*h+f];return 1^(cb.includes(y[128*d+c])&&cb.includes(h))},yc=c=>{c.forEach(d=>Y(...d))},zc=c=>{let d={b:0,c:0,j:0,s:0,B:0,x:0,y:0};1===c&&(d.a=20,d.C=[],d.G=[],d.u=1);2===c&&(d.a=20,d.open=0,d.u=2);3===c&&(d.a=20,d.K=0,d.u=2);4===c&&(d.a=20,d.v=4);return d};
ma.onload=()=>{w.clearRect(...sa);w.save();w.drawImage(ma,0,128,128,128,...sa);let c=w.getImageData(...sa),d=[];w.restore();for(let f=0;f<c.data.length;f+=4)d.push(sc(...c.data.slice(f,f+4)));y=d;wc();Ac();y.src="./map.png"};ma.src="./sprsheet4.png";onkeydown=c=>A[c.keyCode]=1;onkeyup=c=>A[c.keyCode]=0;
let Ac=()=>{w.clearRect(...sa);var c=0,d=0,f=c=0,h=0;let e,B,m=16*C,n=16*E;if(qc){for(e=0;16>e;e++)for(B=0;7>B;B++)Y(Na[b(4*g())%4],8*e,8*B,90*b(4*g()),.5<g());Y(gc,40,64);Y(hc,28,72);Y(ec,112,112);Y(fc,100,120)}else{var D=(a,q,u=1)=>[(a-m)*u,(q-n)*u];for(let a=n;a<n+16;a++)for(let q=m;q<m+16;q++){let u=y[128*a+q];3==C&&0==E&&(15===u&&4>a&&Y(Na[(a&q)%4],8*q-8*m,8*a-8*n),oc&&Z(J,K,8,8,88+8*m,48+8*n,16,8)&&(qc=1),Y(Oa,88,48,0,1));5===u&&(h=0,4>C&&4>E&&(h=1),3<C&&4>E&&(h=3),4>C&&3<E&&(h=2),3<C&&3<E&&
(h=4),3<=C&&4>=C&&3<=E&&4>=E&&(h=0),d|=3<E&&0!=h,tc(ta[h],...D(q,a)));11===u&&(Y(F([49,50,51],8,8),...D(q,a,8),0),f=8*(a-n)+4,d=!0);if(12===u){let [k,l]=D(q,a,8);Y(Aa,k,l);Z(J,K,8,8,k+8*m,l+8*n,8,8)&&(Ea||(r([[329,50],[440,50],[659,50]]),sessionStorage.setItem("px",J),sessionStorage.setItem("py",K),Gb(k,l),T=kc),Ea=60)}if(14===u&&!pb[h-1]){let [k,l]=D(q,a,8);Y(Ja,k,l);Y(Ia,k,l);Z(J,K,8,8,k+8*m,l+8*n,8,8)&&(Gb(k,l),Jb(k,l),r(ha),pb[h-1]=1,sessionStorage.setItem(`hp${h-1}`,1),kc=T=kc+2)}if(8===u&&!qb[64>
q?0:1]){let [k,l]=D(q,a,8);Y(Ja,k,l);Y(Ka[0],k,l);Z(J,K,8,8,k+8*m,l+8*n,8,8)&&(Gb(k,l),Jb(k,l),r(ha),qb[64>q?0:1]=1,sessionStorage.setItem(`suit${64>q?0:1}`,1),nb++,ob-=.25)}if(6===u&&!rb[h-1]){let [k,l]=D(q,a,8);Y(Ja,k,l);Y(Ka[h],k,l);Z(J,K,8,8,k+8*m,l+8*n,8,8)&&(Gb(k,l),Jb(k,l),r(ha),r(t),rb[h-1]=1,sessionStorage.setItem(`wep${h-1}`,1),xb++)}if(9===u&&!c&&0<nc){let [k,l]=D(q,a,8);if(4==M.reduce((na,db)=>na+db)){for(e of L)Z(k-1+8*m,l-2+8*n,16,24,e.x,e.y,8,8)&&(e.x=-100,r(t),U=4,nc-=e.l);0>=nc&&
(r(ia),r(t),r(ha),U=8,Jb(k+4,l+6),O(k-8,l-8),O(k+16,l-8),O(k-8,l+24),O(k+16,l+24),oc=1);yc([[ua,k,l-16],[ua,k,l+24,180,!0],[va,k,l-2],[va,k+8,l-2,0,1],[va,k,l+10,180,1],[va,k+8,l+10,180,0],[G[M[1]],k-8,l-16],[G[M[2]],k+16,l-16],[G[M[3]],k+16,l+24],[G[M[4]],k-8,l+24],[ya,k+4,l-8],[ya,k+4,l+16,180,!0],[za,k+4,l-16],[za,k+4,l+24,180,!0]])}else yc([[ua,k,l],[ua,k,l+8,180,!0],[G[M[1]],k-8,l-16],[G[M[2]],k+16,l-16],[G[M[3]],k+16,l+24],[G[M[4]],k-8,l+24],[ya,k+4,l-8],[ya,k+4,l+16,180,!0],[za,k+4,l-16],[za,
k+4,l+24,180,!0]]);c=!0}}oc&&(Y(Ma,48,120),20>pc?pc++:(U=1+b(3*g()),pc=0,r(v),r(v),d=!0,Bb(128*g(),128*g()),O(128*g(),128*g())));C=b(J/8/16);E=b(K/8/16);var Q=(a,q)=>{lc||(lc=q,T-=a*ob,r(v),U=2)},oa=(a,q)=>{[a,q]=[a-8*m,q-8*n];return 0>a||127<a||0>q||127<q},pa=(a,q,u=8,k=8,l=null)=>{for(e of L)Z(e.x+2,e.y+2,4,4,a,q,u,k)&&l&&l(e)};hb=hb.filter(a=>{Y(a.f,a.x,a.y);--a.w;a.x+=a.m;a.y+=a.A;return 0<a.w});L=L.filter(a=>{Y(a.f,a.x-8*m,a.y-8*n,0,0>a.m);a.x+=a.m;let q=!0;xc(a.x+2,a.y+2,a.x+6,a.y+6)&&(a.effect&&
a.effect(a.x-8*m,a.y-8*n),r([[100,20]]),q=!1);return q^=oa(a.x,a.y)});Rb=Rb.filter(a=>{let q=!0;Y(Fa,a.x-8*m,a.y-8*n);1==a.type&&Y(Ha,a.x-8*m,a.y+4-8*n);2==a.type&&Y(Ga,a.x-8*m,a.y+4-8*n);Z(a.x,a.y,8,16,J,K,8,8)&&(J=a.x+4>J?a.x-8:a.x+8);pa(a.x,a.y,8,16,u=>{u.x=-1E3;u.l-1>=a.type+1?(r(t),O(a.x-8-8*m,a.y-4-8*n),q=!1):r(fa)});return q});var Hb=[];Qb=Qb.filter(a=>{Y(a.I,a.x-8*m,a.y-8*n);let q=!0,u=(k,l,na,db,Ib=1)=>{let [eb,fb]=[na-k,db-l];k=Math.sqrt(eb*eb+fb*fb);return[eb/k*Ib,fb/k*Ib]};1==a.type&&
!a.F&&(a.F=a.g=J<a.x?-1:1);2==a.type&&(!a.D&&(a.D=8*n+16+b(64*g())),a.y>a.D&&(a.y-=.5),a.y<=a.D&&(q=0));3==a.type&&!a.F&&(a.F=[a.g,a.h]=u(a.x,a.y,J,K,.6));a.x+=a.g;a.y+=a.h;2==a.type&&0==q&&(zb.forEach(k=>Hb.push([a.x,a.y,0,...k])),q=0);xc(a.x+2,a.y+2,a.x+6,a.y+6)&&(q=3==a.type?1:0);oa(a.x,a.y)&&(q=0);return q});for(e of Hb)S(...e);for(var x of Ob){c=x;if(D=!oa(x[0],x[1]))x[3]&&!x[2]&&x[3](x[0],x[1],x[4],x[5],x[6]),D=!0;c[2]=D}Pb=Pb.filter(a=>{if(oa(a.x,a.y))return!1;Y(a.f,a.x-8*m,a.y-8*n,a.dir);
jc%60||0!=a.type||S(a.x,a.y,a.type,a.g,a.h);jc%80||1!=a.type||S(a.x,a.y,a.type,a.g,a.h);jc%70||2!=a.type||S(a.x,a.y,3,0,0,Da);3==a.type&&(xc(a.x+1+.4*a.g,a.y+1,a.x+7+.4*a.g,a.y+7)?(a.g=-a.g,a.x=8*b((a.x+4)/8),a.dir=0<a.g?270:90):a.x+=.4*a.g);4==a.type&&(xc(a.x+1,a.y+1+.4*a.h,a.x+7,a.y+7+.4*a.h)?(a.h=-a.h,a.y=8*b((a.y+4)/8),a.dir=0<a.h?180:0):a.y+=.4*a.h);(3==a.type||4==a.type)&&0==z%3&&(640<a.y?Fb(a.x-8*m,a.y-8*n):Eb(a.x-8*m,a.y-8*n));Z(a.x+2,a.y+2,4,4,J,K,8,8)&&Q(2,50);for(let q of L)if(Z(a.x,a.y,
8,8,q.x+2,q.y+2,4,4)&&(a.a-=q.l,r([[100,20],[220,50],[110,75]]),U=1,q.x=-100,0>=a.a))return Bb(a.x-8*m,a.y-8*n),T<kc&&50<100*g()&&Mb.push([a.x,a.y]),5==a.type&&zb.forEach(u=>S(a.x,a.y,0,...u)),!1;return!0});Mb=Mb.filter(a=>{if(oa(...a))return!1;Y(Lb,a[0]-8*m,a[1]-8*n);return Z(a[0]+2,a[1]+2,4,4,J,K,8,8)?(r(fa),T<kc&&T++,!1):!0});for(var N of ac)M[h]=~~sessionStorage.getItem(`boss${h}`),!oa(N.x,N.y)&&8<J-8*m&&121>J-8*m&&(N.x=-100,M[h]||(V=W=0,R=zc(h),Sb=0));if(R)if(yc([[Kb,0,56],[Kb,0,64],[Kb,120,
56],[Kb,120,64]]),180>Sb)Y(La,44,30),0==Sb&&r(ia),Sb++;else{R.b&&R.b--;if(4===h){x=k=>{Z(J,K,8,8,24+X+8*m,u+8*n,24*R.v,24)&&(Q(2,50),Ab(J-8*m,K-8*n),U=2,J-=24,k())};let [a,q]=[112,56];N=b(3*Math.sin(gb/2));let u=q-2+N;N=q-2-N;c=k=>{if(!R.b)for(let l of L)if(Z(l.x+2,l.y+2,4,4,a-16*R.v+8*m,u+8*n,24,24)&&(l.x=-100,R.a-=l.l,r(v),R.b=60,U=1,k(),0>=R.a))if(1<R.v)O(a-16*R.v,q),R.v--,r(t),U=4,R.a=20;else{Jb(a+8,u+8);U=8;r(t);R=null;break}};switch(W){case 0:X=128;W++;break;case 1:X>a-16*(R.v+1)?X--:W++;break;
case 2:c(()=>0>=R.a&&(W=3));60>V&&V++;60<=V&&(V=0,50<Date.now()%100?W=6:[[-1,0],[-.7,-.7],[-.7,.7]].forEach(k=>{S(X+16+8*m,u+8+8*n,0,...k)}));break;case 3:128>X?X+=2:W=4;break;case 4:for(e of rc(64))I[e]=[8*e,0,24+Date.now()%64,0,128];W=5;break;case 5:0==z%2&&r([[55,4],[110,8]]);for(e in I){if(-512<I[e][0])I[e][0]-=.25*(5-R.v);else{W=1;I=[];break}if(!(-8>I[e][0])){-128<I[e][0]&&I[e][3]<I[e][2]&&(I[e][3]+=.2*(5-R.v));-128<I[e][0]&&I[e][4]>I[e][2]+24&&(I[e][4]-=.2*(5-R.v));c=I[e][3]+b(12*Math.sin(gb/
16+I[e][0]/16+e/8));D=I[e][4]+b(12*Math.sin(gb/16+I[e][0]/16+e/8));Y(wa,I[e][0],c,180,!0);Y(wa,I[e][0],D);for(B=0;12>B;B++)Y(xa,I[e][0],c-8-8*B,180,!0),Y(xa,I[e][0],D+8+8*B);(Z(I[e][0]+8*m,8*n,8,c-5,J,K,8,8)||Z(I[e][0]+8*m,D+9+8*n,8,D,J,K,8,8))&&Q(2,50)}}break;case 6:104>V&&V++;c(()=>0>=R.a&&(W=3));if(104<=V)for(e in rc(6))I[e]=[8,56-8*e,40,8*-e,0],I[e+6]=[8,64+8*e,40,8*-e,0],W=7;Y(wa,X+16-V,u+8,270,!0);for(e=0;6>e;e++)Y(xa,X+16-V+8+8*e,u+8,270,!0);Z(J,K,8,8,X+24-V+8*m,u+8+8*n,56,8)&&Q(2,50);break;
case 7:D=0;c(()=>0>=R.a&&(W=3));for(e in I){Y(wa,I[e][0]+I[e][3],I[e][1],90,!0);for(B=0;6>B;B++)Y(xa,I[e][0]+I[e][3]-8-8*B,I[e][1],90,1);I[e][4]||(I[e][3]<I[e][2]?(I[e][3]++,D++):I[e][4]=1);1==I[e][4]&&(0<I[e][3]?(I[e][3]-=2,D++):(Bb(I[e][0],I[e][1]),0==b(I[e][1]/8)%8%2&&S(I[e][0]+8*m,I[e][1]+8*n,0,1,0),I[e][4]=2,I[e][0]=-8));Z(8+8*m,I[e][1]+8*n,I[e][3],8,J,K,8,8)&&Q(2,50)}D||(W=1,I=[])}if(R)for(x(()=>null),yc([[Pa,X+16,u,0,!1,R.b],[Pa,X+16,u+12,180,!0,R.b]]),x=0;x<R.v;x++)yc([[Qa,X+26+16*x,x%2?N:
u,0,!1],[Qa,X+26+16*x,x%2?N+12:u+12,180,!0]])}if(2===h){let [a,q,u,k]=[56,96,16,16];Z(J,K,8,8,a+8*m,q+8*n,u,k)&&Q(2,50);R.open?yc([[Sa,52,96,0,0,R.b&&0==R.b%2],[Sa,64,96,0,1,R.b&&0==R.b%2]]):yc([[Ra,64,96,0,0,R.b&&0==R.b%2],[Ra,56,96,0,1,R.b&&0==R.b%2]]);pa(a+8*m,q+8*n,u,k,l=>{R.b||(l.x=-100,R.open?(r([[0,10],...v]),R.a-=e.l,R.b=10,U=2):r(fa))});x=2*Math.sin(2*gb);switch(W){case 0:Y(Ta,36+x,112);Y(Ta,84-x,112);120>V?V+=1+.5*(2-R.u):(V=0,R.j<4+2*(2-R.u)?(R.j++,S(48*R.c+36+x+8*m,112+8*n,2,0,0,Ca),R.c=
!R.c):(R.c=112,R.j=5,W=1));break;case 1:0==R.B?8<R.c&&(R.c-=2):120>R.c?R.c+=2:W=2;Y(Ta,36+x,R.c);Y(Ta,84-x,R.c);for(e=0;e<b((128-R.c)/8)-1;e++)Y(Ua,36+x,R.c+8*e,0,0==e%2,1==R.s%2),Y(Ua,84-x,R.c+8*e,0,0==e%2,1==R.s%2);0==R.B&&[36+x+8*m,84-x+8*m].forEach(l=>{Z(J,K,8,8,l,R.c+8*n,8,120-R.c)&&Q(1,50);pa(l,R.c+8*n,8,120-R.c,na=>{na.x=-100;R.s||(r([[0,15],...t]),R.s=30,R.j-=na.l,U=1)});if(0>=R.j)for(R.B=1,e=0;16>e;e++)Bb(l-8*m,8*e)});R.s&&R.s--;break;case 2:R.open=1,0>=R.a&&(O(a-4,q-4),r(t),0<R.u&&(R.u--,
R.a=20,R.open=0,W=R.B=0))}0>=R.a&&(Jb(a+4,q+4),r(t),R=null,V=W=0)}if(1===h){Y(Va,16,56,0,0,0<R.b&&0==R.b%2);let [a,q]=[16+8*m,56+8*n];0<R.b&&R.b--;pa(a,q,16,16,u=>{u.x=-1E3;R.b||(R.b=15,R.a-=u.l,r(v),U=2)});Z(a,q,16,16,J,K,8,8)&&(J=a+24,Q(2,30),U=2);switch(W){case 0:[[40,48],[56,48],[64,48],[80,48],[96,48]].forEach(u=>R.C.push([...u,3])),W=1;case 1:R.C=R.C.filter(u=>{for(B=0;4>B;B++)Y(Wa[u[2]-1],u[0],u[1]+8*B);J-8*m<u[0]+8&&(J=u[0]+8+8*m);pa(u[0]+8*m,u[1]+8*n,8,32,k=>{k.x=-1E3;r(fa);U=1;--u[2]});
return 0<u[2]});for(e of R.G)Y(Ub,e[0],e[1],56>e[1]?180:0);if(90>V)V++;else for(e of R.G)V=0,S(e[0]+8*m,e[1]+8*n,3,0,64>e[1]?1:-1,Da),r(fa)}0>=R.a&&(0<R.u?(R.u--,R.a=20,J=108+8*m,K=60+8*n,W=0,R.G=[[8,80],[32,80],[8,24],[32,24]]):(R=null,V=W=0),Jb(a+4-8*m,q+4-8*n),U=4,r(t))}if(3===h){0==R.x&&(R.x=48,R.y=16);yc([[Xa,R.x,R.y,0,0,R.b&&0==R.b%2],[Xa,R.x+16,R.y,0,1,R.b&&0==R.b%2],[ya,R.x+12,R.y-8]]);for(e=R.y-16;0<e;e-=8)Y(za,R.x+12,e);pa(R.x+8*m,R.y+8*n,32,16,a=>{a.x=-100;r(fa);R.b||(R.b=90,U=1,R.a-=a.l)});
0<R.b&&R.b--;Z(R.x+8*m,R.y+8*n,32,16,J,K,8,8)&&(64>J-8*m?J-=16:J+=16,Q(1,50));switch(W){case 0:R.o=[8,48,88,48],R.i=0,W=1,R.j=30;case 1:3<R.i&&(R.i=0);V<R.j?V++:(V=0,W=6>R.c?2:6);break;case 2:V<=R.j?(V+=.5,R.x=vc(R.x,R.o[R.i])):(V=0,W=3,U=1,r(v));break;case 3:B=8;Y(Ya,R.o[R.i]+2,28);Y(Ya,R.o[R.i]+22,28);for(e=0;e<=B;e++)Y(Ya,R.o[R.i]+2,32+8*e),Y(Ya,R.o[R.i]+22,32+8*e);10>V?V++:(V=0,W=4,U=1);break;case 4:B=8;Y(Za,R.o[R.i]+2,28);Y(Za,R.o[R.i]+22,28);for(e=0;e<=B;e++)Y($a,R.o[R.i]+2,32+8*e),Y($a,R.o[R.i]+
22,32+8*e);20>V?V++:(zb.forEach(a=>{S(R.o[R.i]+2+8*m,32+8*B+8*n,0,...a,Da);S(R.o[R.i]+22+8*m,32+8*B+8*n,0,...a,Da)}),W=5);[2,22].forEach(a=>{Z(R.x+a+8*m,R.y+32+8*n,8,64,J,K,8,8)&&Q(4,50)});break;case 5:S(R.o[R.i]+12+8*m,20+8*n,3,0,0,Da);W=1;V=0;R.i++;U=1;R.c++;break;case 6:V<R.j?V++:(V=0,W=7,U=3,r(t),O(R.x+4,R.y-8));R.y=vc(R.y,88);break;case 7:V<R.j?V++:(V=0,S(R.x+12+8*m,R.y+8+8*n,3,0,0,Da));400>R.s?R.s++:(W=8,V=R.s=0);break;case 8:V<R.j?V++:(V=0,W=1,U=3,r(v),R.c=0),R.y=vc(R.y,16)}0>=R.a&&(O(R.x,
R.y),0<R.u?(R.a=20,R.j-=5,R.u--,V=0,W=7==W?8:1,R.i=0,R.s=0):(R=null,W=V=0,r(t)))}R||(M[h]=1,sessionStorage.setItem(`boss${h}`,1))}if(mc)49===z%50&&(window.location=window.location);else{for(var H of Qb){if(lc)break;Z(J,K,8,8,H.x+3,H.y+3,2,2)&&(H.x=-100,Q(1,30))}0>=T&&(mc=!0,z=0,r(t),Jb(J-8*m,K-8*n));H=A[39]-A[37];x=A[40]-A[38];p&&(p=navigator.getGamepads()[p.index],H=(.5<p.axes[0]?1:0)-(-.5>p.axes[0]?1:0),x=(.5<p.axes[1]?1:0)-(-.5>p.axes[1]?1:0),A[32]=p.buttons[0].value?1:0);c=H|x;bb=H?0>H:bb;R&&
(J=8>J-8*m?8+8*m:J,J=112<J-8*m?112+8*m:J);N=J+4+5*H;D=K+4+5*x;J=xc(N,K+1,N,K+7)?8*b((J+1)/8):J+H;K=xc(J+1,D,J+7,D)?8*b((K+1)/8):K+x;A[32]&&!ic&&5>L.length&&Cb[xb](J,K,bb?-2:2)&&r(yb[xb]);ic=A[32];c&&[Eb,Fb][2==h||4==h||d&&f<K-8*n?1:0](J-8*m,K-8*n);Y(ab[nb],J-8*m,K-8*n,0,!bb,lc);lc&&lc--}w.getImageData(...sa);la.clearRect(...sa);h=2*Math.sin(2*gb);H=2*Math.cos(2*gb);h=U?0==U*z%2?h*U*-1:h*U:0;H=U?0==U*z%2?H*U*-1:H*U:0;for(la.drawImage(ja,0,0);128>f;f++)x=d?ba(Math.sin(2*gb+1280*f)):0,aa(x),la.clearRect(0,
f,128,1),la.drawImage(ja,0,f,128,1,0<x?-1:0>x?0:-1,f,128,1);w.clearRect(...sa);w.drawImage(ka,h-1,H);U&&U--;gb+=.05;Y(cc,0,120);for(d=0;d<b(T);d++)Y(dc[0],14+2*d,120);if(R){for(e=R.a;e--;)Y(dc[3],103-2*(e-1),120,0,1);Y(bc,112,120)}Ea&&(Ea--,Y(Ba,52,60));jc++;requestAnimationFrame(Ac);for(qa++;5<qa;)z++,qa-=5}};
</script></body>