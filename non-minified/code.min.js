var aa=["2d"];function fa(){this.Sb=function(e){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=e[b]||0;.01>this.K&&(this.K=.01);.18>(e=this.Z+this.K+this.e)&&(e=.18/e,this.Z*=e,this.K*=e,this.e*=e)}}aa.raw=aa.slice();
var ha=new function(){var e,b,k,l,g,d,a,f,m,n,p,r;this.Y=new fa;this.reset=function(){var q=this.Y;l=100/(q.vb*q.vb+.001);g=100/(q.Qa*q.Qa+.001);d=1-q.Ta*q.Ta*q.Ta*.01;a=-q.Ua*q.Ua*q.Ua*1E-6;q.qb||(p=.5-q.n/2,r=5E-5*-q.jc);f=0<q.da?1-q.da*q.da*.9:1+q.da*q.da*10;m=0;n=1==q.Wa?0:(1-q.Wa)*(1-q.Wa)*2E4+32};this.Xb=function(){this.reset();var q=this.Y;return e=q.Z*q.Z*1E5,b=q.K*q.K*1E5,k=q.e*q.e*1E5+10,e+b+k|0};this.Vb=function(q,u){var t=this.Y,ka=1!=t.fa||t.kb,L=t.kb*t.kb*.1,la=1+3E-4*t.oc,E=t.fa*t.fa*
t.fa*.1,eb=1+1E-4*t.t,fb=1!=t.fa,gb=t.x*t.x,hb=t.Qa,ma=t.q||t.r,ib=t.r*t.r*t.r*.2,jb=t.q*t.q*(0>t.q?-1020:1020),na=t.p?32+((1-t.p)*(1-t.p)*2E4|0):0,kb=t.d,oa=t.fc/2,lb=t.k*t.k*.01,ba=t.qb,ca=e,mb=1/e,nb=1/b,ob=1/k;.8<(t=5/(1+t.Yb*t.Yb*20)*(.01+E))&&(t=.8);t=1-t;for(var pa,z,F,A,v,G,da=!1,qa=0,M=0,N=0,ra=0,U=0,V=0,H=0,ea=0,sa=0,ta=0,W=Array(1024),O=Array(32),B=W.length;B--;)W[B]=0;for(B=O.length;B--;)O[B]=2*Math.random()-1;for(B=0;B<u;B++){if(da)return B;if(na&&++sa>=na&&(sa=0,this.reset()),n&&++m>=
n&&(n=0,l*=f),(l*=d+=a)>g&&(l=g,0<hb&&(da=!0)),z=l,0<oa&&(ta+=lb,z*=1+Math.sin(ta)*oa),8>(z|=0)&&(z=8),ba||(0>(p+=r)?p=0:.5<p&&(p=.5)),++M>ca)switch(M=0,++qa){case 1:ca=b;break;case 2:ca=k}switch(qa){case 0:N=M*mb;break;case 1:N=1+2*(1-M*nb)*kb;break;case 2:N=1-M*ob;break;case 3:N=0,da=!0}ma&&(0>(F=0|(jb+=ib))?F=-F:1023<F&&(F=1023));ka&&la&&(1E-5>(L*=la)?L=1E-5:.1<L&&(L=.1));G=0;for(var pb=8;pb--;){if(++H>=z&&(H%=z,3==ba))for(var ua=O.length;ua--;)O[ua]=2*Math.random()-1;switch(ba){case 0:v=H/z<p?
.5:-.5;break;case 1:v=1-H/z*2;break;case 2:v=0>(v=0>(A=.5<(A=H/z)?6.28318531*(A-1):6.28318531*A)?1.27323954*A+.405284735*A*A:1.27323954*A-.405284735*A*A)?.225*(v*-v-v)+v:.225*(v*v-v)+v;break;case 3:v=O[Math.abs(32*H/z|0)]}ka&&(pa=V,0>(E*=eb)?E=0:.1<E&&(E=.1),fb?(U+=(v-V)*E,U*=t):(V=v,U=0),ra+=(V+=U)-pa,v=ra*=1-L);ma&&(W[ea%1024]=v,v+=W[(ea-F+1024)%1024],ea++);G+=v}G*=.125*N*gb;q[B]=1<=G?32767:-1>=G?-32768:32767*G|0}return u}};
window.gc=function(e){ha.Y.Sb(e);var b=ha.Xb();e=new Uint8Array(4*((b+1)/2|0)+44);b=2*ha.Vb(new Uint16Array(e.buffer,44),b);var k=new Uint32Array(e.buffer,0,44);k[0]=1179011410;k[1]=b+36;k[2]=1163280727;k[3]=544501094;k[4]=16;k[5]=65537;k[6]=44100;k[7]=88200;k[8]=1048578;k[9]=1635017060;k[10]=b;b+=44;k=0;for(var l="data:audio/wav;base64,";k<b;k+=3){var g=e[k]<<16|e[k+1]<<8|e[k+2];l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>
12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&g]}return k-=b,l.slice(0,l.length-k)+"==".slice(0,k)};
function ia(){var e={};e.o=2*Math.PI;e.extend=function(k,l){for(var g in l)k[g]=l[g];return k};e.w=function(k,l,g){return(l-k)*g+k};e.ic=function(k,l){return(k%l+l)%l};var b={2:function(k){return k*k},3:function(k){return k*k*k},4:function(k){return k*k*k*k},5:function(k){return k*k*k*k*k}};return e.ec=function(k,l){if(1==l)return k;var g=.5>(k=Math.max(0,Math.min(1,k))),d=(b[l]||b[2])((g?k:1-k)/.5);return d/=2,g?d:1-d},e}"object"==typeof module&&module.a?module.a=ia():this.c=ia();
function ja(){var e={F:!0,Ja:function(b){b.beginPath()},move:function(b,k,l){b.moveTo(l.x,l.y)},line:function(b,k,l){b.lineTo(l.x,l.y)},$:function(b,k,l,g,d){b.bezierCurveTo(l.x,l.y,g.x,g.y,d.x,d.y)},closePath:function(b){b.closePath()},A:function(){},N:function(b,k,l,g){this.Ja(b,k);l.forEach(function(d){d.g(b,k,e)});g&&this.closePath(b,k)},stroke:function(b,k,l,g,d){l&&(b.strokeStyle=g,b.lineWidth=d,b.stroke())},fill:function(b,k,l,g){l&&(b.fillStyle=g,b.fill())},end:function(){}};return e}
"object"==typeof module&&module.a?module.a=ja():this.c.Ca=ja();
function va(){function e(l){return k(l.x)+","+k(l.y)+" "}var b={v:!0},k=b.round=function(l){return Math.round(1E3*l)/1E3};return b.Ja=function(){},b.move=function(l,g,d){return"M"+e(d)},b.line=function(l,g,d){return"L"+e(d)},b.$=function(l,g,d,a,f){return"C"+e(d)+e(a)+e(f)},b.closePath=function(){return"Z"},b.A=function(l,g,d){g.setAttribute("d",d)},b.N=function(l,g,d,a){var f="";d.forEach(function(m){f+=m.g(l,g,b)});a&&(f+=this.closePath(l,g));this.A(l,g,f)},b.stroke=function(l,g,d,a,f){d&&(g.setAttribute("stroke",
a),g.setAttribute("stroke-width",f))},b.fill=function(l,g,d,a){g.setAttribute("fill",d?a:"none")},b.end=function(l,g){l.appendChild(g)},b}"object"==typeof module&&module.a?module.a=va():this.c.Fa=va();
function wa(e){function b(d){this.set(d)}function k(d,a,f,m){if(a&&0!=a%g){var n=Math.cos(a);a=Math.sin(a);var p=d[f],r=d[m];d[f]=p*n-r*a;d[m]=r*n+p*a}}function l(d){return 1E-8>Math.abs(d-1)?1:Math.sqrt(d)}var g=e.o;return b.prototype.set=function(d){return this.x=d&&d.x||0,this.y=d&&d.y||0,this.z=d&&d.z||0,this},b.prototype.write=function(d){return d?(this.x=null!=d.x?d.x:this.x,this.y=null!=d.y?d.y:this.y,this.z=null!=d.z?d.z:this.z,this):this},b.prototype.rotate=function(d){if(d)return this.ya(d.z),
this.Lb(d.y),this.Kb(d.x),this},b.prototype.ya=function(d){k(this,d,"x","y")},b.prototype.Kb=function(d){k(this,d,"y","z")},b.prototype.Lb=function(d){k(this,d,"x","z")},b.prototype.zb=function(d){return!!d&&this.x===d.x&&this.y===d.y&&this.z===d.z},b.prototype.add=function(d){return d?(this.x+=d.x||0,this.y+=d.y||0,this.z+=d.z||0,this):this},b.prototype.gb=function(d){d&&(this.x-=d.x||0,this.y-=d.y||0,this.z-=d.z||0)},b.prototype.multiply=function(d){return null==d?this:("number"==typeof d?(this.x*=
d,this.y*=d,this.z*=d):(this.x*=null!=d.x?d.x:1,this.y*=null!=d.y?d.y:1,this.z*=null!=d.z?d.z:1),this)},b.prototype.transform=function(d,a,f){return this.multiply(f),this.rotate(a),this.add(d),this},b.prototype.w=function(d,a){return this.x=e.w(this.x,d.x||0,a),this.y=e.w(this.y,d.y||0,a),this.z=e.w(this.z,d.z||0,a),this},b.prototype.na=function(){return l(this.x*this.x+this.y*this.y+this.z*this.z)},b.prototype.Xa=function(){return l(this.x*this.x+this.y*this.y)},b.prototype.Ma=function(){return new b(this)},
b}if("object"==typeof module&&module.a)module.a=wa(require("./boilerplate"));else{var xa=this.c;xa.I=wa(xa)}
function ya(e,b,k,l){function g(a){this.create(a||{})}var d={x:1,y:1,z:1};return g.prototype.create=function(a){this.children=[];e.extend(this,this.constructor.C);this.ab(a);this.translate=new b(a.translate);this.rotate=new b(a.rotate);this.scale=(new b(d)).multiply(this.scale);this.origin=new b;this.b=new b;this.i&&this.i.Ha(this)},g.C={},g.M=Object.keys(g.C).concat(["rotate","translate","scale","addTo"]),g.prototype.ab=function(a){var f,m=this.constructor.M;for(f in a)-1!=m.indexOf(f)&&(this[f]=
a[f])},g.prototype.Ha=function(a){-1==this.children.indexOf(a)&&(a.remove(),a.i=this,this.children.push(a))},g.prototype.removeChild=function(a){-1!=(a=this.children.indexOf(a))&&this.children.splice(a,1)},g.prototype.remove=function(){this.i&&this.i.removeChild(this)},g.prototype.update=function(){this.reset();this.children.forEach(function(a){a.update()});this.transform(this.translate,this.rotate,this.scale)},g.prototype.reset=function(){this.b.set(this.origin)},g.prototype.transform=function(a,
f,m){this.b.transform(a,f,m);this.children.forEach(function(n){n.transform(a,f,m)})},g.prototype.Zb=function(){this.update();this.Aa();this.u.forEach(function(a){a.O()});this.u.sort(g.eb)},g.eb=function(a,f){return a.G-f.G},Object.defineProperty(g.prototype,"flatGraph",{get:function(){return this.Ga||this.Aa(),this.Ga},set:function(a){this.Ga=a}}),g.prototype.Aa=function(){this.u=this.la()},g.prototype.la=function(){return this.Ia([this])},g.prototype.Ia=function(a){return this.children.forEach(function(f){f=
f.la();Array.prototype.push.apply(a,f)}),a},g.prototype.O=function(){this.G=this.b.z},g.prototype.g=function(){},g.prototype.va=function(a){if(!a)throw Error("ctx is "+a+". Canvas context required for render. Check .renderGraphCanvas( ctx ).");this.u.forEach(function(f){f.g(a,k)})},g.prototype.wa=function(a){if(!a)throw Error("svg is "+a+". SVG required for render. Check .renderGraphSvg( svg ).");this.u.forEach(function(f){f.g(a,l)})},g.prototype.Ma=function(a){var f={};return this.constructor.M.forEach(function(m){f[m]=
this[m]},this),e.extend(f,a),new (0,this.constructor)(f)},g.h=function m(f){return function(n){function p(r){this.create(r||{})}return p.prototype=Object.create(f.prototype),p.prototype.constructor=p,p.C=e.extend({},f.C),e.extend(p.C,n),p.M=f.M.slice(0),Object.keys(p.C).forEach(function(r){1!=!p.M.indexOf(r)&&p.M.push(r)}),p.h=m(p),p}}(g),g}
if("object"==typeof module&&module.a)module.a=ya(require("./boilerplate"),require("./vector"),require("./canvas-renderer"),require("./svg-renderer"));else{var y=this.c;y.B=ya(y,y.I,y.Ca,y.Fa)}
function za(e){function b(){}function k(a){this.create(a||{})}var l="mousedown",g="mousemove",d="mouseup";return e.PointerEvent?(l="pointerdown",g="pointermove",d="pointerup"):"ontouchstart"in e&&(l="touchstart",g="touchmove",d="touchend"),k.prototype.create=function(a){this.qa=a.qa||b;this.pa=a.pa||b;this.oa=a.oa||b;this.Ka(a.mc)},k.prototype.Ka=function(a){(a=this.Ra(a))&&(a.style.touchAction="none",a.addEventListener(l,this))},k.prototype.Ra=function(a){return"string"==typeof a&&(a=document.querySelector(a)),
a},k.prototype.handleEvent=function(a){var f=this["on"+a.type];f&&f.call(this,a)},k.prototype.onmousedown=function(a){this.ca(a,a)},k.prototype.ontouchstart=function(a){this.ca(a,a.changedTouches[0])},k.prototype.ca=function(a,f){a.preventDefault();this.Oa=f.pageX;this.Pa=f.pageY;e.addEventListener(g,this);e.addEventListener(d,this);this.qa(f)},k.prototype.ontouchmove=function(a){this.ba(a,a.changedTouches[0])},k.prototype.onmousemove=function(a){this.ba(a,a)},k.prototype.ba=function(a,f){a.preventDefault();
this.pa(f,f.pageX-this.Oa,f.pageY-this.Pa)},k.prototype.onmouseup=k.prototype.ontouchend=function(){e.removeEventListener(g,this);e.removeEventListener(d,this);this.oa()},k}"object"==typeof module&&module.a?module.a=za(this):this.c.Da=za(this);
function Aa(e,b,k){function l(){}var g=e.o,d=b.h({element:void 0,ja:!0,zoom:1,D:!1,resize:!1,ra:l,qa:l,pa:l,oa:l,Ab:l});return e.extend(d.prototype,k.prototype),d.prototype.create=function(a){b.prototype.create.call(this,a);k.prototype.create.call(this,a);this.Ob(this.element);this.Nb(this.D);this.Rb(this.resize)},d.prototype.Ob=function(a){if(!(a=this.Ra(a)))throw Error("Zdog.Illustration element required. Set to "+a);var f=a.nodeName.toLowerCase();"canvas"==f?this.Mb(a):"svg"==f&&this.Ub(a)},d.prototype.Tb=
function(a,f){a=Math.round(a);f=Math.round(f);this.F?this.bb(a,f):this.v&&this.cb(a,f)},d.prototype.Rb=function(a){this.resize=a;this.xa||(this.xa=this.Ya.bind(this));a?(window.addEventListener("resize",this.xa),this.Ya()):window.removeEventListener("resize",this.xa)},d.prototype.Ya=function(){this.Qb();this.Ab(this.width,this.height)},d.prototype.Qb=function(){if("fullscreen"==this.resize)var a=window.innerWidth,f=window.innerHeight;else a=(f=this.element.getBoundingClientRect()).width,f=f.height;
this.Tb(a,f)},d.prototype.Jb=function(){this.F?this.va(void 0):this.v&&this.wa(void 0)},d.prototype.ac=function(){this.Zb();this.Jb()},d.prototype.Mb=function(a){this.element=a;this.F=!0;this.ka=this.element.getContext("2d");this.bb(a.width,a.height)},d.prototype.bb=function(a,f){this.width=a;this.height=f;var m=this.ea=window.devicePixelRatio||1;this.element.width=this.sb=a*m;this.element.height=this.rb=f*m;1<m&&!this.resize&&(this.element.style.width=a+"px",this.element.style.height=f+"px")},d.prototype.va=
function(a){a=a||this;this.Db();b.prototype.va.call(a,this.ka);this.Cb()},d.prototype.Db=function(){var a=this.ka;a.lineCap="round";a.lineJoin="round";a.clearRect(0,0,this.sb,this.rb);a.save();this.ja&&a.translate(this.width/2*this.ea,this.height/2*this.ea);var f=this.ea*this.zoom;a.scale(f,f);this.ra(a)},d.prototype.Cb=function(){this.ka.restore()},d.prototype.Ub=function(a){this.element=a;this.v=!0;this.ea=1;var f=a.getAttribute("width");a=a.getAttribute("height");this.cb(f,a)},d.prototype.cb=function(a,
f){this.width=a;this.height=f;var m=a/this.zoom,n=f/this.zoom;this.element.setAttribute("viewBox",(this.ja?-m/2:0)+" "+(this.ja?-n/2:0)+" "+m+" "+n);this.resize?(this.element.removeAttribute("width"),this.element.removeAttribute("height")):(this.element.setAttribute("width",a),this.element.setAttribute("height",f))},d.prototype.wa=function(a){a=a||this;for(var f=this.element;f.firstChild;)f.removeChild(f.firstChild);this.ra(this.element);b.prototype.wa.call(a,this.element)},d.prototype.Nb=function(a){a&&
(!0===a&&(a=this),this.D=a,this.Ka(this.element))},d.prototype.ca=function(){this.tb=this.D.rotate.x;this.ub=this.D.rotate.y;k.prototype.ca.apply(this,arguments)},d.prototype.ba=function(a,f){var m=Math.min(this.width,this.height),n=(f.pageX-this.Oa)/m*g;this.D.rotate.x=this.tb-(f.pageY-this.Pa)/m*g;this.D.rotate.y=this.ub-n;k.prototype.ba.apply(this,arguments)},d}
if("object"==typeof module&&module.a)module.a=Aa(require("./boilerplate"),require("./anchor"),require("./dragger"));else{var C=this.c;C.Ea=Aa(C,C.B,C.Da)}
function Ba(e){function b(g,d,a){this.method=g;this.Bb=d.map(k);this.j=d.map(l);this.Eb=a;this.R=this.j[this.j.length-1];"arc"==g&&(this.La=[new e,new e])}function k(g){return g instanceof e?g:new e(g)}function l(g){return new e(g)}return b.prototype.reset=function(){var g=this.Bb;this.j.forEach(function(d,a){d.set(g[a])})},b.prototype.transform=function(g,d,a){this.j.forEach(function(f){f.transform(g,d,a)})},b.prototype.g=function(g,d,a){return this[this.method](g,d,a)},b.prototype.move=function(g,
d,a){return a.move(g,d,this.j[0])},b.prototype.line=function(g,d,a){return a.line(g,d,this.j[0])},b.prototype.$=function(g,d,a){return a.$(g,d,this.j[0],this.j[1],this.j[2])},b.prototype.arc=function(g,d,a){var f=this.j[0],m=this.j[1],n=this.La[0],p=this.La[1];return n.set(this.Eb).w(f,.5625),p.set(m).w(f,.5625),a.$(g,d,n,p,m)},b}if("object"==typeof module&&module.a)module.a=Ba(require("./vector"));else{var Ca=this.c;Ca.X=Ba(Ca.I)}
function Da(e,b,k,l){var g=l.h({stroke:1,fill:!1,color:"#333",closed:!0,visible:!0,path:[{}],S:{z:1},J:!0});g.prototype.create=function(f){l.prototype.create.call(this,f);this.ha();this.S=new b(f.S||this.S);this.ua=new b(this.S);this.m=new b};var d=["move","line","bezier","arc"];g.prototype.ha=function(){this.A();this.$b()};g.prototype.A=function(){};g.prototype.$b=function(){var f;this.f=this.path.map(function(m,n){var p=Object.keys(m),r=p[0],q=m[r];1==p.length&&-1!=d.indexOf(r)||(r="line",q=m);
p=Array.isArray(q);return("line"==r||"move"==r)&&!p&&(q=[q]),r=new k(0===n?"move":r,q,f),f=r.R,r})};g.prototype.reset=function(){this.b.set(this.origin);this.ua.set(this.S);this.f.forEach(function(f){f.reset()})};g.prototype.transform=function(f,m,n){this.b.transform(f,m,n);this.ua.transform(f,m,n);this.m.set(this.b).gb(this.ua);this.f.forEach(function(p){p.transform(f,m,n)});this.children.forEach(function(p){p.transform(f,m,n)})};g.prototype.O=function(){var f=this.f.length,m=this.f[0].R,n=this.f[f-
1].R;2<f&&m.zb(n)&&--f;for(n=m=0;n<f;n++)m+=this.f[n].R.z;this.G=m/f};g.prototype.g=function(f,m){var n=this.f.length;if(this.visible&&n&&(this.Va=0<this.m.z,this.J||!this.Va)){if(!m)throw Error("Zdog renderer required. Set to "+m);m.F&&1==n?this.Fb(f):this.N(f,m)}};var a=e.o;return g.prototype.Fb=function(f){var m=this.U();if(m){f.fillStyle=this.Sa();var n=this.f[0].R;f.beginPath();f.arc(n.x,n.y,m/2,0,a);f.fill()}},g.prototype.U=function(){return this.stroke?1==this.stroke?1:this.stroke:0},g.prototype.Sa=
function(){return"string"==typeof this.J&&this.Va?this.J:this.color},g.prototype.N=function(f,m){var n=this.ma(m),p=this.Sa();m.N(f,n,this.f,!(2==this.f.length&&"line"==this.f[1].method)&&this.closed);m.stroke(f,n,this.stroke,p,this.U());m.fill(f,n,this.fill,p);m.end(f,n)},g.prototype.ma=function(f){if(f.v)return this.H||(this.H=document.createElementNS("http://www.w3.org/2000/svg","path"),this.H.setAttribute("stroke-linecap","round"),this.H.setAttribute("stroke-linejoin","round")),this.H},g}
if("object"==typeof module&&module.a)module.a=Da(require("./boilerplate"),require("./vector"),require("./path-command"),require("./anchor"));else{var D=this.c;D.l=Da(D,D.I,D.X,D.B)}
function Ea(e){var b=e.h({jb:!1,visible:!0});return b.prototype.O=function(){var k=0;this.u.forEach(function(l){l.O();k+=l.G});this.G=k/this.u.length;this.jb&&this.u.sort(e.eb)},b.prototype.g=function(k,l){this.visible&&this.u.forEach(function(g){g.g(k,l)})},b.prototype.Aa=function(){this.u=this.Ia([])},b.prototype.la=function(){return[this]},b}if("object"==typeof module&&module.a)module.a=Ea(require("./anchor"));else{var Fa=this.c;Fa.ia=Ea(Fa.B)}
function Ga(e){return(e=e.h({width:1,height:1})).prototype.A=function(){var b=this.width/2,k=this.height/2;this.path=[{x:-b,y:-k},{x:b,y:-k},{x:b,y:k},{x:-b,y:k}]},e}if("object"==typeof module&&module.a)module.a=Ga(require("./shape"));else{var Ha=this.c;Ha.Rect=Ga(Ha.l)}
function Ia(e){return(e=e.h({width:1,height:1,Na:.25,closed:!1})).prototype.A=function(){var b=this.width/2,k=this.height/2,l=Math.min(this.Na,Math.min(b,k)),g=b-l,d=[{x:g,y:-k},{arc:[{x:b,y:-k},{x:b,y:-(l=k-l)}]}];l&&d.push({x:b,y:l});d.push({arc:[{x:b,y:k},{x:g,y:k}]});g&&d.push({x:-g,y:k});d.push({arc:[{x:-b,y:k},{x:-b,y:l}]});l&&d.push({x:-b,y:-l});d.push({arc:[{x:-b,y:-k},{x:-g,y:-k}]});g&&d.push({x:g,y:-k});this.path=d},e}
if("object"==typeof module&&module.a)module.a=Ia(require("./shape"));else{var Ja=this.c;Ja.pb=Ia(Ja.l)}
function Ka(e){return(e=e.h({s:1,width:void 0,height:void 0,sa:4,closed:!1})).prototype.A=function(){var b=(null!=this.width?this.width:this.s)/2,k=(null!=this.height?this.height:this.s)/2;this.path=[{x:0,y:-k},{arc:[{x:b,y:-k},{x:b,y:0}]}];1<this.sa&&this.path.push({arc:[{x:b,y:k},{x:0,y:k}]});2<this.sa&&this.path.push({arc:[{x:-b,y:k},{x:-b,y:0}]});3<this.sa&&this.path.push({arc:[{x:-b,y:-k},{x:0,y:-k}]})},e}
if("object"==typeof module&&module.a)module.a=Ka(require("./shape"));else{var La=this.c;La.W=Ka(La.l)}function Ma(e,b){var k=b.h({fb:3,Za:.5}),l=e.o;return k.prototype.A=function(){this.path=[];for(var g=0;g<this.fb;g++){var d=g/this.fb*l-l/4;this.path.push({x:Math.cos(d)*this.Za,y:Math.sin(d)*this.Za})}},k}if("object"==typeof module&&module.a)module.a=Ma(require("./boilerplate"),require("./shape"));else{var Na=this.c;Na.ob=Ma(Na,Na.l)}
function Oa(e,b,k,l){var g=l.h({fill:!0}),d=e.o;return g.prototype.create=function(){l.prototype.create.apply(this,arguments);this.P=new k({i:this,translate:{z:this.s/2}});this.V=new b},g.prototype.O=function(){this.V.set(this.b).w(this.P.b,.375);this.G=this.V.z},g.prototype.g=function(a,f){this.Ib(a,f);l.prototype.g.apply(this,arguments)},g.prototype.Ib=function(a,f){if(this.visible){var m=this.wb(f),n=Math.atan2(this.m.y,this.m.x),p=this.s/2*this.m.na(),r=this.b.x,q=this.b.y;if(f.F){var u=n+d/4;
n-=d/4;a.beginPath();a.arc(r,q,p,u,n)}else f.v&&(n=(n-d/4)/d*360,this.L.setAttribute("d","M "+-p+",0 A "+p+","+p+" 0 0 1 "+p+",0"),this.L.setAttribute("transform","translate("+r+","+q+" ) rotate("+n+")"));f.stroke(a,m,this.stroke,this.color,this.U());f.fill(a,m,this.fill,this.color);f.end(a,m)}},g.prototype.wb=function(a){if(a.v)return this.L||(this.L=document.createElementNS("http://www.w3.org/2000/svg","path"),this.L.setAttribute("stroke-linecap","round"),this.L.setAttribute("stroke-linejoin","round")),
this.L},g}if("object"==typeof module&&module.a)module.a=Oa(require("./boilerplate"),require("./vector"),require("./anchor"),require("./ellipse"));else{var I=this.c;I.nb=Oa(I,I.I,I.B,I.W)}
function Pa(e,b,k,l,g){var d=l.h({color:"#333",jb:!0});d.prototype.create=function(){l.prototype.create.apply(this,arguments);this.f=[new b("move",[{}]),new b("line",[{}])]};d.prototype.g=function(m,n){this.Hb(m,n);l.prototype.g.apply(this,arguments)};d.prototype.Hb=function(m,n){if(this.visible){var p=this.ma(n),r=this.T,q=this.ta,u=r.m.na();u=r.s*u+r.U();this.f[0].j[0].set(r.b);this.f[1].j[0].set(q.b);n.F&&(m.lineCap="butt");n.N(m,p,this.f);n.stroke(m,p,!0,this.color,u);n.end(m,p);n.F&&(m.lineCap=
"round")}};d.prototype.ma=function(m){if(m.v)return this.H||(this.H=document.createElementNS("http://www.w3.org/2000/svg","path")),this.H};g.h();var a=k.h({s:1,length:1,frontFace:void 0,fill:!0}),f=e.o;return a.prototype.create=function(){k.prototype.create.apply(this,arguments);this.group=new d({i:this,color:this.color,visible:this.visible});var m=this.length/2,n=this.J||!0;this.T=this.group.T=new g({i:this.group,s:this.s,translate:{z:m},rotate:{y:f/2},color:this.color,stroke:this.stroke,fill:this.fill,
J:this.frontFace||n,visible:this.visible});this.ta=this.group.ta=this.T.Ma({translate:{z:-m},rotate:{y:0},J:n})},a.prototype.g=function(){},["stroke","fill","color","visible"].forEach(function(m){var n="_"+m;Object.defineProperty(a.prototype,m,{get:function(){return this[n]},set:function(p){this[n]=p;this.T&&(this.T[m]=p,this.ta[m]=p,this.group[m]=p)}})}),a}
if("object"==typeof module&&module.a)module.a=Pa(require("./boilerplate"),require("./path-command"),require("./shape"),require("./group"),require("./ellipse"));else{var J=this.c;J.mb=Pa(J,J.X,J.l,J.ia,J.W)}
function Qa(e,b,k,l,g){var d=g.h({length:1,fill:!0}),a=e.o;return d.prototype.create=function(){g.prototype.create.apply(this,arguments);this.P=new l({i:this,translate:{z:this.length}});this.$a=new b;this.V=new b;this.ib=new b;this.Wb=new b;this.hb=[new k("move",[{}]),new k("line",[{}]),new k("line",[{}])]},d.prototype.O=function(){this.V.set(this.b).w(this.P.b,1/3);this.G=this.V.z},d.prototype.g=function(f,m){this.Gb(f,m);g.prototype.g.apply(this,arguments)},d.prototype.Gb=function(f,m){if(this.visible){this.$a.set(this.P.b).gb(this.b);
var n=this.m.na(),p=this.$a.Xa(),r=this.m.Xa();if(r=Math.sin(Math.acos(r/n)),(n*=this.s/2)*r<p){var q=Math.atan2(this.m.y,this.m.x)+a/2;p=Math.acos(n/(p/r));var u=this.ib,t=this.Wb;u.x=Math.cos(p)*n*r;u.y=Math.sin(p)*n;t.set(this.ib);t.y*=-1;u.ya(q);t.ya(q);u.add(this.b);t.add(this.b);this.za(0,u);this.za(1,this.P.b);this.za(2,t);r=this.yb(m);m.N(f,r,this.hb);m.stroke(f,r,this.stroke,this.color,this.U());m.fill(f,r,this.fill,this.color);m.end(f,r)}}},d.prototype.yb=function(f){if(f.v)return this.ga||
(this.ga=document.createElementNS("http://www.w3.org/2000/svg","path"),this.ga.setAttribute("stroke-linecap","round"),this.ga.setAttribute("stroke-linejoin","round")),this.ga},d.prototype.za=function(f,m){this.hb[f].j[0].set(m)},d}if("object"==typeof module&&module.a)module.a=Qa(require("./boilerplate"),require("./vector"),require("./path-command"),require("./anchor"),require("./ellipse"));else{var K=this.c;K.lb=Qa(K,K.I,K.X,K.B,K.W)}
function Ra(e,b,k,l){var g=l.h(),d=e.o,a="frontFace rearFace leftFace rightFace topFace bottomFace".split(" "),f=e.extend({},k.C);delete f.path;a.forEach(function(n){f[n]=!0});e.extend(f,{width:1,height:1,depth:1,fill:!0});var m=b.h(f);return m.prototype.create=function(n){b.prototype.create.call(this,n);this.ha();this.fill=this.fill},m.prototype.ha=function(){a.forEach(function(n){this[n]=this[n]},this)},a.forEach(function(n){var p="_"+n;Object.defineProperty(m.prototype,n,{get:function(){return this[p]},
set:function(r){this[p]=r;this.Pb(n,r)}})}),m.prototype.Pb=function(n,p){var r=n+"Rect",q=this[r];if(p){var u=this.xb(n);u.color="string"==typeof p?p:this.color;q?q.ab(u):q=this[r]=new g(u);q.ha();this.Ha(q)}else this.removeChild(q)},m.prototype.xb=function(n){return{frontFace:{width:this.width,height:this.height,translate:{z:this.depth/2}},kc:{width:this.width,height:this.height,translate:{z:-this.depth/2},rotate:{y:d/2}},hc:{width:this.depth,height:this.height,translate:{x:-this.width/2},rotate:{y:-d/
4}},lc:{width:this.depth,height:this.height,translate:{x:this.width/2},rotate:{y:d/4}},nc:{width:this.width,height:this.depth,translate:{y:-this.height/2},rotate:{x:-d/4}},dc:{width:this.width,height:this.depth,translate:{y:this.height/2},rotate:{x:d/4}}}[n]},"color stroke fill backface front visible".split(" ").forEach(function(n){var p="_"+n;Object.defineProperty(m.prototype,n,{get:function(){return this[p]},set:function(r){this[p]=r;a.forEach(function(q){var u=this[q+"Rect"];q="string"==typeof this[q];
!u||"color"==n&&q||(u[n]=r)},this)}})}),m}if("object"==typeof module&&module.a)module.a=Ra(require("./boilerplate"),require("./anchor"),require("./shape"),require("./rect"));else{var P=this.c;P.Ba=Ra(P,P.B,P.l,P.Rect)}
if("object"==typeof module&&module.a){var Sa=module,Q=require("./boilerplate"),Ta=require("./canvas-renderer"),Ua=require("./svg-renderer"),Va=require("./vector"),Wa=require("./anchor"),Xa=require("./dragger"),Ya=require("./illustration"),Za=require("./path-command"),$a=require("./shape"),ab=require("./group"),bb=require("./rect"),cb=require("./rounded-rect"),db=require("./ellipse"),qb=require("./polygon"),rb=require("./hemisphere"),sb=require("./cylinder"),tb=require("./cone"),ub=require("./box");
Q.Ca=Ta;Q.Fa=Ua;Q.I=Va;Q.B=Wa;Q.Da=Xa;Q.Ea=Ya;Q.X=Za;Q.l=$a;Q.ia=ab;Q.Rect=bb;Q.pb=cb;Q.W=db;Q.ob=qb;Q.nb=rb;Q.mb=sb;Q.lb=tb;Q.Ba=ub;Sa.a=Q}else"function"==typeof define&&define.bc&&define("zdog",[],this.c);x=game.getContext(aa);state=0;level=5;playermovex=playery=playerx=0;playermovey=1;horborder=200;flipy=9E3;flipped=1;paused=!1;direction=1;cameray=0;var R=Zdog.o;obstacle=[];shakeduration=shakey=shakex=0;bgcolor="#223e32";var vb,S=[];
illo=new Zdog.Ea({element:".zdog-canvas",D:!0,zoom:2,resize:!0,rotate:{x:-R/16,y:R/16},ra:function(e){e.beginPath();e.rect(-1080,-1080,2160,2160);e.fillStyle=bgcolor;e.fill()}});player=new Zdog.ia({i:illo,transform:{z:25}});new Zdog.l({i:player,stroke:24,color:"#04bf00"});new Zdog.l({i:player,stroke:5,color:"#fff",translate:{z:5},path:[{x:-6,y:-10},{x:-6,y:0},{move:{x:6,y:-10}},{x:6,y:0}]});
new Zdog.l({i:player,stroke:5,color:"#04bf00",translate:{y:16,z:5},path:[{x:-6,y:-10},{x:-6,y:0},{x:-10,y:0},{move:{x:6,y:-10}},{x:6,y:0},{x:10,y:0}]});new Zdog.l({i:illo,stroke:8,color:"#9db800",path:[{x:-horborder-10,y:-1E3},{x:-horborder-10,y:1E3},{move:{x:horborder+10,y:-1E3}},{x:horborder+10,y:1E3}]});wb();xb(level);T();setInterval(function(){yb(!1)},15);onkeydown=function(e){X(e.key)};
var zb=Math.max(1,Math.floor(.01*(window.innerWidth||document.body.clientWidth))),Ab=0,Bb=0,Cb=0,Db=0,Eb=Math.tan(.375*Math.PI),Fb=document.getElementById("game");Fb.addEventListener("touchstart",function(e){Ab=e.changedTouches[0].screenX;Bb=e.changedTouches[0].screenY},!1);
Fb.addEventListener("touchend",function(e){Cb=e.changedTouches[0].screenX;Db=e.changedTouches[0].screenY;e=Cb-Ab;var b=Db-Bb,k=Math.abs(e/b),l=Math.abs(b/e);Math.abs(e)>zb||Math.abs(b)>zb?(l<=Eb&&X(0>e?"ArrowLeft":"ArrowRight"),k<=Eb&&X(0>b?"ArrowUp":"ArrowDown")):X(" ")},!1);var Gb=1;function Y(){var e=1E4*Math.sin(Gb++);return e-Math.floor(e)}
function xb(e){if(level=e,player.visible=0!=state,Gb=1E3*e,1<obstacle.length)for(var b=0;b!=obstacle.length;b++)obstacle[b].remove(),console.log("Obstacle removed");obstacle=[];flipped=1;bgcolor="#223e32";playermovex=playery=playerx=0;playermovey=1;illo.rotate={x:-R/16,y:R/16};direction=1;var k=2*e+1;for(b=0;b!=k;b++){var l=Y()*(horborder- -horborder)-horborder,g=50*b-direction,d=.2<=Y(),a="#015d00";1==d&&(a="#b3dd52");obstacle[b]=new Zdog.Ba({i:illo,width:32,height:96,frontFace:!1,cc:!1,depth:8,
stroke:8,Na:20,color:a,translate:{x:l,y:g,z:50*d-25}});obstacle[b].aa=!1;console.log[b]}flipy=50*b-direction;console.log("Loaded level "+e.toString())}
function yb(e){for(var b=performance.now();0<S.length&&S[0]<=b-1E3;)S.shift();if(S.push(b),vb=S.length,document.getElementById("fps-display").innerHTML=vb.toString()+" fps",document.getElementById("seed-display").innerHTML=Gb.toString()+" seed",document.getElementById("level-display").innerHTML=level.toString()+" level",document.getElementById("cam-display").innerHTML=illo.rotate.x.toString()+"x  "+illo.rotate.y.toString()+"y  "+illo.rotate.x.toString()+"z  "+R.toString()+"tau",!paused||0!=e){cameray-=
direction;0<shakeduration?(illo.translate={x:0+shakex,y:cameray+shakey},--shakeduration):illo.translate={x:0,y:cameray};-1==flipped&&illo.rotate.x<R/16*7&&(illo.rotate.x+=R/16,bgcolor="#A7C06D");playery>flipy&&(playery=flipy,flipped=-1,Z([0,,.0371,,.3841,.3887,,.1299,,,,,,.566,,.4401,,,1,,,,,.71]),playermovey=-1);for(e=0;4!=e;e+=1)for(playerx+=playermovex/4,playerx>horborder&&(playerx=horborder,playermovex=0,playermovey=1*flipped),playerx<-horborder&&(playerx=-horborder,playermovex=0,playermovey=
1*flipped),playery+=playermovey/4,b=0;b!=obstacle.length;b++)xx=obstacle[b].translate.x,yy=obstacle[b].translate.y,zz=obstacle[b].translate.z,w=obstacle[b].width-5,h=obstacle[b].height-20,(1==flipped&&25==zz||-1==flipped&&-25==zz)&&playerx>xx-w&&playerx<xx+w&&playery>yy-h&&playery<yy+h?0==obstacle[b].aa&&(console.log("Collision detected with "+b.toString()),obstacle[b].aa=!0,shakex=0<playermovex?5:0>playermovex?-5:0,playermovex=0,playermovey=1*flipped,shakeduration=2,Z([0,,.035,,.1449+.5*Y(),.4918,
,-.5252,,,,,,.034,,,,,1,,,,,.5+.3*Y()])):1==obstacle[b].aa&&(console.log("Collision ended with "+b.toString()),obstacle[b].aa=!1,25==obstacle[b].translate.z?(obstacle[b].translate.z=-25,obstacle[b].color="#015d00"):(obstacle[b].translate.z=25,obstacle[b].color="#b3dd52"));T()}}
function X(e){if(console.log(e),0==state)" "==e&&(document.getElementById("l1").style.animation="gamestart-top 1s ease-in",document.getElementById("l2").style.animation="gamestart-bottom 1s ease-in",document.getElementById("l3").style.visibility="hidden",document.getElementById("not").style.visibility="hidden",state=1,Z([1,,.0806,,.4981,.2637,,.4277,,,,,,,,.6758,,,1,,,,,.5]),xb(5),setTimeout(function(){document.getElementById("l1").style.visibility="hidden";document.getElementById("l2").style.visibility=
"hidden"},990));else if(1==state){if("Escape"==e&&Hb(-1),paused){if("f"==e&&yb(!0)," "!=e)return;T()}var b=0;"ArrowLeft"!=e&&"a"!=e&&"q"!=e||(b=-1);"ArrowRight"!=e&&"d"!=e||(b=1);0!=b&&0==playermovex&&(playermovex=8*b,playermovey=0,Z([1,,.2159,.2603,.1064,.4074+.3*Y(),.2062,-.3031,-.0065,.0638,.0206,-.0114,,.4332,.1898,,-.0074,-.0091,1,-.0456,,.1791,.0109,.5]));"ArrowUp"!=e&&"w"!=e&&"z"!=e||(playermovex=0,playermovey=.5*flipped,Z([0,,.0549,.0019,.1806,.3751+.3*Y(),.0193,.2378,.0414,,.0453,3E-4,,.3062,
.0736,.0563,.014,.0768,.936,-.0341,.0175,.1448,.0321,.5]));"ArrowDown"!=e&&"s"!=e||(playermovex=0,playermovey=3*flipped,Z([1,,.2506,.0144,.0071,.4263+.2*Y(),.2723,-.252,,,,,,.7952,-.6573,,.1965,-.182,1,,,,,.5]));" "==e&&Hb(!1)}}function T(){player.translate={x:playerx,y:playery};var e=0;-1==flipped&&(e=-R/2);player.rotate={y:.08*-playermovex,x:-.15*playermovey*flipped+e};cameray=-flipped*player.translate.y*.935-100;illo.ac()}
function wb(){illo.zoom=850<window.innerWidth&&600<window.innerHeight?2:600<window.innerWidth&&400<window.innerHeight?1.5:400<window.innerWidth&&300<window.innerHeight?1:.9;T()}function Z(e){e=jsfxr(e);var b=new Audio;b.src=e;b.play()}
function Hb(e){if(0!=state){if(-1==e)paused=!paused;else{if(paused==e)return;paused=e}e=document.getElementById("not");paused?(e.style.visibility="visible",e.innerHTML="PAUSED, [Space] or [Tap] to resume<br><br>How to play:<br>\u2b05\u27a1 Flying kick<br>\u2b06\u2b07 Slow/fasten fall<br><br>Touched platforms move to<br>background and increase jackpot.<br>Reach bottom of level to claim<br>jackpot and flip to the backside!<br> You lose when time runs out..."):e.style.visibility="hidden"}}
window.addEventListener("resize",function(){wb()});document.addEventListener("visibilitychange",function(){Hb(!0)});